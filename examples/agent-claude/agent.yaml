# Example: Claude Code agent
#
# Run Claude Code in an isolated container with credential injection.
#
# Run with:
#   moat claude examples/agent-claude
#   moat claude examples/agent-claude -p "fix the bug in main.py"

name: claude-test

dependencies:
  - node@20
  - claude-code
  - git

grants:
  - anthropic
  - github
  - ssh:github.com  # Required for Anthropic marketplace (cloned via SSH)

command: ["claude"]
interactive: true

# Claude session logs are automatically synced to the host when "anthropic" grant
# is configured. To disable, set: claude: { sync_logs: false }

# Plugin configuration
claude:
  # Enable plugins from marketplaces
  plugins:
    "context7-docs-fetcher@ccplugins": true  # Fetch up-to-date library documentation
    "code-review@ccplugins": true             # Code review assistant

  # Define custom marketplaces (in addition to the built-in Anthropic marketplace)
  marketplaces:
    ccplugins:
      source: github
      repo: ccplugins/marketplace
