# Example: Secrets injection from AWS SSM Parameter Store
#
# This example demonstrates injecting secrets from AWS SSM Parameter Store
# into the container environment. The agent receives the secret value as an
# environment variable without ever seeing the SSM reference.
#
# Prerequisites:
#   1. Install AWS CLI: brew install awscli
#   2. Configure credentials: aws configure (or aws sso login)
#   3. Create a test parameter (if it doesn't exist):
#      aws ssm put-parameter --name "/myapp/test-secret" --value "my-test-value" --type SecureString
#
# Run with:
#   moat run examples/secrets-ssm
#
# The container will have TEST_SECRET set to the value from SSM.

name: secrets-ssm-demo

secrets:
  TEST_SECRET: ssm:///myapp/test-secret
  # Cross-region secret example (uncomment to use):
  # OTHER_SECRET: ssm://us-east-1/myapp/other-secret

command: ["sh", "-c", "echo Your secret: $TEST_SECRET"]
