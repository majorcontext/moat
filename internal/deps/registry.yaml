# internal/deps/registry.yaml
# Dependency registry - embedded into binary at compile time

# Runtimes
node:
  description: Node.js runtime
  type: runtime
  default: "20"
  versions: ["18", "20", "22"]

go:
  description: Go programming language
  type: runtime
  default: "1.22"

python:
  description: Python programming language
  type: runtime
  default: "3.11"
  versions: ["3.9", "3.10", "3.11", "3.12"]

# Package managers / runtimes
bun:
  description: JavaScript runtime and package manager
  type: github-binary
  repo: oven-sh/bun
  asset: "bun-linux-x64.zip"
  bin: bun
  default: "1.1.0"

# npm packages
typescript:
  description: TypeScript compiler
  type: npm
  package: typescript
  requires: [node]

yarn:
  description: Yarn package manager
  type: npm
  package: yarn
  requires: [node]

pnpm:
  description: pnpm package manager
  type: npm
  package: pnpm
  requires: [node]

claude-code:
  description: Claude Code CLI
  type: npm
  package: "@anthropic-ai/claude-code"
  requires: [node]

# Build tools (github-binary)
protoc:
  description: Protocol Buffers compiler
  type: github-binary
  repo: protocolbuffers/protobuf
  asset: "protoc-{version}-linux-x86_64.zip"
  bin: bin/protoc
  default: "25.1"

sqlc:
  description: SQL compiler for Go
  type: github-binary
  repo: sqlc-dev/sqlc
  asset: "sqlc_{version}_linux_amd64.tar.gz"
  default: "1.25.0"

golangci-lint:
  description: Go linter aggregator
  type: github-binary
  repo: golangci/golangci-lint
  asset: "golangci-lint-{version}-linux-amd64.tar.gz"
  bin: "golangci-lint-{version}-linux-amd64/golangci-lint"
  default: "1.55.2"

# CLI tools
gh:
  description: GitHub CLI
  type: github-binary
  repo: cli/cli
  asset: "gh_{version}_linux_amd64.tar.gz"
  bin: "gh_{version}_linux_amd64/bin/gh"
  default: "2.40.0"

# Database clients (apt)
psql:
  description: PostgreSQL client
  type: apt
  package: postgresql-client

mysql:
  description: MySQL client
  type: apt
  package: mysql-client

# Common tools (apt)
git:
  description: Git version control
  type: apt
  package: git

# Custom installers (complex logic)
playwright:
  description: Browser testing framework
  type: custom
  requires: [node]
  default: "latest"

aws:
  description: AWS CLI
  type: custom
  default: "2"

gcloud:
  description: Google Cloud CLI
  type: custom
  default: "latest"

# Task runners
task:
  description: Task runner / Make alternative
  type: github-binary
  repo: go-task/task
  asset: "task_linux_amd64.tar.gz"
  bin: task
  default: "3.40.0"

# Go development tools
gofumpt:
  description: Stricter gofmt
  type: github-binary
  repo: mvdan/gofumpt
  asset: "gofumpt_v{version}_linux_amd64"
  bin: "gofumpt_v{version}_linux_amd64"
  default: "0.7.0"
  requires: [go]

govulncheck:
  description: Go vulnerability scanner
  type: go-install
  go-package: golang.org/x/vuln/cmd/govulncheck
  requires: [go]

goreleaser:
  description: Go release automation
  type: github-binary
  repo: goreleaser/goreleaser
  asset: "goreleaser_Linux_x86_64.tar.gz"
  bin: goreleaser
  default: "2.5.0"

air:
  description: Live reload for Go apps
  type: github-binary
  repo: cosmtrek/air
  asset: "air_{version}_linux_amd64.tar.gz"
  bin: air
  default: "1.52.0"
  requires: [go]

mockgen:
  description: Go mock generator
  type: go-install
  go-package: go.uber.org/mock/mockgen
  requires: [go]

buf:
  description: Protocol Buffers tooling
  type: github-binary
  repo: bufbuild/buf
  asset: "buf-Linux-x86_64.tar.gz"
  bin: buf/bin/buf
  default: "1.47.0"

act:
  description: Run GitHub Actions locally
  type: github-binary
  repo: nektos/act
  asset: "act_Linux_x86_64.tar.gz"
  bin: act
  default: "0.2.70"

# Meta dependencies (bundles)
go-extras:
  description: Common Go development tools (gofumpt, govulncheck, goreleaser)
  type: meta
  requires: [gofumpt, govulncheck, goreleaser]
